name = "toran-proxy"
main = "worker/src/index.ts"
compatibility_date = "2024-12-01"

# Environment variables (use wrangler secret for sensitive data)
[vars]
ENVIRONMENT = "production"

# Admin API URL - Worker fetches gateway configs from here
# Production: Set via wrangler secret put ADMIN_API_URL
# Local dev: http://localhost:5173
# ADMIN_API_URL will be set as a secret in production

# KV namespace for caching (REQUIRED for Phase 3 caching features)
[[kv_namespaces]]
binding = "CACHE"
id = "915c6dae07f94d2faf888513af25520a"
preview_id = "9a8e25216f7342c683194d6aebb02adf"

# Routes - Handle all subdomains of toran.dev
# Configure after domain is added to Cloudflare
# routes = [
#   { pattern = "*.toran.dev/*", zone_name = "toran.dev" }
# ]

# Resource limits
# [limits]
# cpu_ms = 50  # Only available on paid plans

# Development environment
[env.dev]
name = "toran-proxy-dev"
routes = []
